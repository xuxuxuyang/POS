{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\nimport config from \"./config/index.js\";\r\n\r\nexport default {\r\n  globalData: {\r\n    config: config, // 全局配置\r\n    userInfo: null, // 用户信息\r\n    isAuthenticated: false, // 是否已认证\r\n  },\r\n\r\n  onLaunch: function () {\r\n    console.log(\"App Launch\");\r\n\r\n    // 初始化云环境\r\n    this.initCloud();\r\n\r\n    // 检查更新\r\n    this.checkUpdate();\r\n  },\r\n\r\n  onShow: function () {\r\n    console.log(\"App Show\");\r\n  },\r\n\r\n  onHide: function () {\r\n    console.log(\"App Hide\");\r\n  },\r\n\r\n  methods: {\r\n    // 初始化云环境\r\n    initCloud() {\r\n      if (!wx.cloud) {\r\n        console.error(\"请使用 2.2.3 或以上的基础库以使用云能力\");\r\n        return;\r\n      }\r\n\r\n      wx.cloud.init({\r\n        env: config.cloud.ENV_ID,\r\n        traceUser: true,\r\n      });\r\n\r\n      console.log(\"云环境初始化成功:\", config.cloud.ENV_ID);\r\n    },\r\n\r\n    // 检查小程序更新\r\n    checkUpdate() {\r\n      if (wx.canIUse(\"getUpdateManager\")) {\r\n        const updateManager = wx.getUpdateManager();\r\n\r\n        updateManager.onCheckForUpdate(function (res) {\r\n          if (res.hasUpdate) {\r\n            console.log(\"检测到新版本\");\r\n          }\r\n        });\r\n\r\n        updateManager.onUpdateReady(function () {\r\n          wx.showModal({\r\n            title: \"更新提示\",\r\n            content: \"新版本已经准备好，是否重启应用？\",\r\n            success: function (res) {\r\n              if (res.confirm) {\r\n                updateManager.applyUpdate();\r\n              }\r\n            },\r\n          });\r\n        });\r\n\r\n        updateManager.onUpdateFailed(function () {\r\n          console.error(\"新版本下载失败\");\r\n        });\r\n      }\r\n    },\r\n\r\n    // 调用云函数\r\n    callCloudFunction(name, data) {\r\n      return new Promise((resolve, reject) => {\r\n        wx.cloud.callFunction({\r\n          name,\r\n          data,\r\n          success: (res) => {\r\n            console.log(`云函数 ${name} 调用成功:`, res);\r\n            if (res.result && res.result.code === 0) {\r\n              resolve(res.result.data);\r\n            } else {\r\n              reject(res.result || { message: `云函数 ${name} 调用失败` });\r\n            }\r\n          },\r\n          fail: (err) => {\r\n            console.error(`云函数 ${name} 调用失败:`, err);\r\n            reject(err);\r\n          },\r\n        });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n/*每个页面公共css */\r\n</style>\r\n","import App from './App'\n\n// #ifndef VUE3\nimport Vue from 'vue'\nimport './uni.promisify.adaptor'\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue({\n  ...App\n})\napp.$mount()\n// #endif\n\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nexport function createApp() {\n  const app = createSSRApp(App)\n  return {\n    app\n  }\n}\n// #endif"],"names":["config","uni","wx","createSSRApp","App"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV,QAAQA,aAAM;AAAA;AAAA,IACd,UAAU;AAAA;AAAA,IACV,iBAAiB;AAAA;AAAA,EAClB;AAAA,EAED,UAAU,WAAY;AACpBC,kBAAAA,oCAAY,YAAY;AAGxB,SAAK,UAAS;AAGd,SAAK,YAAW;AAAA,EACjB;AAAA,EAED,QAAQ,WAAY;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACvB;AAAA,EAED,QAAQ,WAAY;AAClBA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACvB;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,YAAY;AACV,UAAI,CAACC,cAAE,KAAC,OAAO;AACbD,sBAAAA,MAAc,MAAA,SAAA,iBAAA,yBAAyB;AACvC;AAAA,MACF;AAEAC,oBAAE,KAAC,MAAM,KAAK;AAAA,QACZ,KAAKF,aAAAA,OAAO,MAAM;AAAA,QAClB,WAAW;AAAA,MACb,CAAC;AAEDC,0BAAA,MAAA,OAAA,iBAAY,aAAaD,oBAAO,MAAM,MAAM;AAAA,IAC7C;AAAA;AAAA,IAGD,cAAc;AACZ,UAAIE,cAAE,KAAC,QAAQ,kBAAkB,GAAG;AAClC,cAAM,gBAAgBA,mBAAG;AAEzB,sBAAc,iBAAiB,SAAU,KAAK;AAC5C,cAAI,IAAI,WAAW;AACjBD,0BAAAA,oCAAY,QAAQ;AAAA,UACtB;AAAA,QACF,CAAC;AAED,sBAAc,cAAc,WAAY;AACtCC,wBAAAA,KAAG,UAAU;AAAA,YACX,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS,SAAU,KAAK;AACtB,kBAAI,IAAI,SAAS;AACf,8BAAc,YAAW;AAAA,cAC3B;AAAA,YACD;AAAA,UACH,CAAC;AAAA,QACH,CAAC;AAED,sBAAc,eAAe,WAAY;AACvCD,wBAAAA,MAAA,MAAA,SAAA,iBAAc,SAAS;AAAA,QACzB,CAAC;AAAA,MACH;AAAA,IACD;AAAA;AAAA,IAGD,kBAAkB,MAAM,MAAM;AAC5B,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCC,sBAAE,KAAC,MAAM,aAAa;AAAA,UACpB;AAAA,UACA;AAAA,UACA,SAAS,CAAC,QAAQ;AAChBD,gCAAY,MAAA,OAAA,iBAAA,OAAO,IAAI,UAAU,GAAG;AACpC,gBAAI,IAAI,UAAU,IAAI,OAAO,SAAS,GAAG;AACvC,sBAAQ,IAAI,OAAO,IAAI;AAAA,mBAClB;AACL,qBAAO,IAAI,UAAU,EAAE,SAAS,OAAO,IAAI,QAAM,CAAG;AAAA,YACtD;AAAA,UACD;AAAA,UACD,MAAM,CAAC,QAAQ;AACbA,gCAAc,MAAA,SAAA,iBAAA,OAAO,IAAI,UAAU,GAAG;AACtC,mBAAO,GAAG;AAAA,UACX;AAAA,QACH,CAAC;AAAA,MACH,CAAC;AAAA,IACF;AAAA,EACF;AACH;AChFO,SAAS,YAAY;AAC1B,QAAM,MAAME,cAAY,aAACC,SAAG;AAC5B,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}