{"version":3,"file":"login.js","sources":["pages/user/login.vue","../../1.代码相关/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9sb2dpbi52dWU"],"sourcesContent":["<template>\r\n  <view class=\"login-container\">\r\n    <view class=\"login-header\">\r\n      <image\r\n        src=\"https://cdn-icons-png.flaticon.com/128/847/847969.png\"\r\n        class=\"logo\"\r\n      ></image>\r\n      <view class=\"header-title\">用户登录/注册</view>\r\n    </view>\r\n\r\n    <!-- 微信登录按钮 -->\r\n    <view class=\"wx-login-section\">\r\n      <button\r\n        class=\"wx-login-btn\"\r\n        open-type=\"getUserInfo\"\r\n        @getuserinfo=\"handleWxLogin\"\r\n      >\r\n        <image\r\n          src=\"https://cdn-icons-png.flaticon.com/128/5968/5968764.png\"\r\n          class=\"wx-icon\"\r\n        ></image>\r\n        <text>微信一键登录</text>\r\n      </button>\r\n      <view class=\"login-tips\">登录更便捷，体验更丰富</view>\r\n    </view>\r\n\r\n    <!-- 用户协议 -->\r\n    <view class=\"agreement\">\r\n      <checkbox :checked=\"agreed\" @click=\"agreed = !agreed\"></checkbox>\r\n      <text>登录即代表您已同意</text>\r\n      <text class=\"link\">《服务协议》</text>\r\n      <text>和</text>\r\n      <text class=\"link\">《隐私政策》</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      agreed: true,\r\n    };\r\n  },\r\n  methods: {\r\n    // 处理微信登录\r\n    handleWxLogin(e) {\r\n      if (!this.agreed) {\r\n        uni.showToast({\r\n          title: \"请同意服务协议和隐私政策\",\r\n          icon: \"none\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      // 判断用户是否授权\r\n      if (e.detail.userInfo) {\r\n        // 用户同意授权\r\n        const userInfo = {\r\n          avatar:\r\n            e.detail.userInfo.avatarUrl ||\r\n            \"https://cdn-icons-png.flaticon.com/128/924/924915.png\",\r\n          nickName: e.detail.userInfo.nickName || \"微信用户\",\r\n          userId: \"U\" + new Date().getTime(),\r\n          vipLevel: \"普通用户\",\r\n          wallet: \"￥0\",\r\n          couponCount: 0,\r\n          points: 100,\r\n        };\r\n\r\n        // 存储用户信息\r\n        uni.setStorageSync(\"userInfo\", JSON.stringify(userInfo));\r\n\r\n        // 提示登录成功\r\n        uni.showToast({\r\n          title: \"登录成功\",\r\n          icon: \"success\",\r\n          duration: 1500,\r\n          success: () => {\r\n            // 延迟返回，让用户看到提示\r\n            setTimeout(() => {\r\n              uni.navigateBack();\r\n            }, 1500);\r\n          },\r\n        });\r\n      } else {\r\n        // 用户拒绝授权\r\n        uni.showToast({\r\n          title: \"您拒绝了授权，无法使用微信登录\",\r\n          icon: \"none\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.login-container {\r\n  min-height: 100vh;\r\n  padding: 40rpx;\r\n  background-color: #fff;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.login-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin-top: 60rpx;\r\n  margin-bottom: 120rpx;\r\n}\r\n\r\n.logo {\r\n  width: 150rpx;\r\n  height: 150rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.header-title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.wx-login-section {\r\n  padding: 40rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.wx-login-btn {\r\n  width: 100%;\r\n  height: 90rpx;\r\n  background-color: #09bb07;\r\n  color: #fff;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 45rpx;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.wx-login-btn::after {\r\n  border: none;\r\n}\r\n\r\n.wx-icon {\r\n  width: 50rpx;\r\n  height: 50rpx;\r\n  margin-right: 15rpx;\r\n}\r\n\r\n.login-tips {\r\n  margin-top: 40rpx;\r\n  font-size: 28rpx;\r\n  color: #999;\r\n}\r\n\r\n.agreement {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-top: auto;\r\n  margin-bottom: 40rpx;\r\n  padding: 0 20rpx;\r\n  justify-content: center;\r\n}\r\n\r\n.agreement .link {\r\n  color: #1296db;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/0.Pos推广/wx-pos/pages/user/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAsCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,QAAQ;AAAA;EAEX;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,cAAc,GAAG;AACf,UAAI,CAAC,KAAK,QAAQ;AAChBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AAGA,UAAI,EAAE,OAAO,UAAU;AAErB,cAAM,WAAW;AAAA,UACf,QACE,EAAE,OAAO,SAAS,aAClB;AAAA,UACF,UAAU,EAAE,OAAO,SAAS,YAAY;AAAA,UACxC,QAAQ,OAAM,oBAAI,KAAI,GAAG,QAAS;AAAA,UAClC,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,aAAa;AAAA,UACb,QAAQ;AAAA;AAIVA,sBAAG,MAAC,eAAe,YAAY,KAAK,UAAU,QAAQ,CAAC;AAGvDA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,UACV,SAAS,MAAM;AAEb,uBAAW,MAAM;AACfA,4BAAG,MAAC,aAAY;AAAA,YACjB,GAAE,IAAI;AAAA,UACR;AAAA,QACH,CAAC;AAAA,aACI;AAELA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACD;AAAA,EACF;AACH;;;;;;;;;AC7FA,GAAG,WAAW,eAAe;"}