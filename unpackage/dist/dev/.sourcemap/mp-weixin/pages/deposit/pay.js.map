{"version":3,"file":"pay.js","sources":["pages/deposit/pay.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGVwb3NpdC9wYXkudnVl"],"sourcesContent":["<template>\n  <view class=\"deposit-container\">\n    <!-- 顶部状态卡片 -->\n    <view class=\"status-card\">\n      <view class=\"card-header\">\n        <text class=\"card-title\">押金退还</text>\n        <view class=\"refund-records-btn\" @click=\"goToRefundOrders\" v-if=\"!isDetailMode\">\n          <text>退款记录</text>\n          <text class=\"arrow\">></text>\n        </view>\n      </view>\n      <view class=\"card-content\">\n        <view class=\"amount\">¥{{ amount }}</view>\n        <view class=\"desc\">退还至您的账户</view>\n        <view class=\"order-info\">\n          <text>订单号：{{ orderId }}</text>\n          <text>产品：{{ productName }}</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 退款进度状态 (已申请退款时显示) -->\n    <view class=\"refund-status-section\" v-if=\"hasRefundRequest\">\n      <view class=\"section-title\">退款进度</view>\n      \n      <!-- 进度条 -->\n      <view class=\"progress-bar\">\n        <view class=\"progress-steps\">\n          <view class=\"progress-step\" :class=\"{active: refundInfo.status !== '已拒绝', current: refundInfo.status === '待审核'}\">\n            <view class=\"step-dot\"></view>\n            <text class=\"step-text\">申请提交</text>\n            <text class=\"step-time\">{{ formatDate(refundInfo.applyTime) }}</text>\n          </view>\n          \n          <view class=\"progress-step\" :class=\"{active: ['已通过', '已退款'].includes(refundInfo.status), current: refundInfo.status === '已通过'}\">\n            <view class=\"step-dot\"></view>\n            <text class=\"step-text\">审核通过</text>\n            <text class=\"step-time\">{{ refundInfo.approveTime ? formatDate(refundInfo.approveTime) : '' }}</text>\n          </view>\n          \n          <view class=\"progress-step\" :class=\"{active: refundInfo.status === '已退款', current: refundInfo.status === '已退款'}\">\n            <view class=\"step-dot\"></view>\n            <text class=\"step-text\">退款完成</text>\n            <text class=\"step-time\">{{ refundInfo.refundTime ? formatDate(refundInfo.refundTime) : '' }}</text>\n          </view>\n        </view>\n        <view class=\"progress-line\"></view>\n      </view>\n      \n      <!-- 当前状态 -->\n      <view class=\"current-status\">\n        <view class=\"status-label\">当前状态</view>\n        <view :class=\"['status-value', {'status-rejected': refundInfo.status === '已拒绝'}]\">\n          {{ statusMap[refundInfo.status] || \"处理中\" }}\n        </view>\n      </view>\n      \n      <!-- 拒绝原因 -->\n      <view class=\"reject-reason\" v-if=\"refundInfo.status === '已拒绝'\">\n        <view class=\"reason-label\">拒绝原因</view>\n        <view class=\"reason-value\">{{ refundInfo.rejectReason || '序列号验证失败，请确认POS机是否已激活' }}</view>\n      </view>\n      \n      <!-- 申请信息 -->\n      <view class=\"refund-detail\">\n        <view class=\"detail-item\">\n          <text class=\"detail-label\">序列号</text>\n          <text class=\"detail-value\">{{ refundInfo.serialNumber }}</text>\n        </view>\n        <view class=\"detail-item\" v-if=\"refundInfo.machineImage\">\n          <text class=\"detail-label\">上传凭证</text>\n          <text class=\"detail-value img-preview\" @click=\"previewImage(refundInfo.machineImage)\">查看</text>\n        </view>\n        <view class=\"detail-item\">\n          <text class=\"detail-label\">申请时间</text>\n          <text class=\"detail-value\">{{ formatDate(refundInfo.applyTime) }}</text>\n        </view>\n      </view>\n      \n      <!-- 重新申请按钮 (仅当申请被拒绝时显示) -->\n      <view class=\"reapply-btn-wrap\" v-if=\"refundInfo.status === '已拒绝'\">\n        <button class=\"reapply-btn\" @click=\"resetApplication\">重新申请</button>\n      </view>\n    </view>\n\n    <!-- POS机序列号输入 (未申请退款时显示) -->\n    <view class=\"serial-number-section\" v-if=\"!hasRefundRequest\">\n      <view class=\"section-title\">POS机序列号</view>\n      <view class=\"form-item\">\n        <input \n          class=\"serial-input\" \n          v-model=\"serialNumber\"\n          placeholder=\"请输入POS机背面的序列号\"\n          maxlength=\"20\"\n        />\n      </view>\n      <view class=\"serial-tip\">请确认序列号正确，否则将影响押金退还</view>\n      \n      <view class=\"upload-section\">\n        <view class=\"upload-title\">上传机器照片凭证（可选）</view>\n        <view class=\"upload-box\" @click=\"uploadImage\">\n          <image v-if=\"machineImage\" :src=\"machineImage\" mode=\"aspectFit\" class=\"preview-image\"></image>\n          <view v-else class=\"upload-placeholder\">\n            <text class=\"upload-icon\">+</text>\n            <text class=\"upload-text\">上传照片</text>\n          </view>\n        </view>\n        <view class=\"upload-tip\">上传POS机背面照片(包含序列号)，有助于加快审核</view>\n      </view>\n    </view>\n\n    <!-- 退还方式选择 (未申请退款时显示) -->\n    <view class=\"payment-methods\" v-if=\"!hasRefundRequest\">\n      <view class=\"section-title\">退还方式</view>\n      <view\n        class=\"payment-method\"\n        :class=\"{ active: refundMethod === 'wechat' }\"\n        @click=\"refundMethod = 'wechat'\"\n      >\n        <image src=\"/static/wechat-pay.png\" mode=\"aspectFit\"></image>\n        <text class=\"method-name\">原路退回</text>\n        <text class=\"method-select\"></text>\n      </view>\n    </view>\n\n    <!-- 注意事项 -->\n    <view class=\"notice\" v-if=\"!hasRefundRequest\">\n      <view class=\"section-title\">注意事项</view>\n      <view class=\"notice-item\">\n        <text class=\"dot\">•</text>\n        <text class=\"notice-text\">请确保POS机已成功激活并正常使用</text>\n      </view>\n      <view class=\"notice-item\">\n        <text class=\"dot\">•</text>\n        <text class=\"notice-text\">审核通过后，退款将在1-3个工作日内到账</text>\n      </view>\n      <view class=\"notice-item\">\n        <text class=\"dot\">•</text>\n        <text class=\"notice-text\">如有疑问，请联系客服</text>\n      </view>\n    </view>\n\n    <!-- 底部操作按钮 -->\n    <view class=\"action-buttons\">\n      <button class=\"action-btn cancel\" @click=\"goBack\">{{ isDetailMode ? '返回列表' : '返回' }}</button>\n      <button class=\"action-btn confirm\" v-if=\"!hasRefundRequest\" @click=\"handleAction\">\n        申请退还\n      </button>\n      <button class=\"action-btn contact\" v-if=\"hasRefundRequest\" @click=\"contactService\">\n        联系客服\n      </button>\n    </view>\n\n    <!-- 退款申请结果弹窗 -->\n    <view class=\"result-popup\" v-if=\"showResult\">\n      <view class=\"result-content\">\n        <view class=\"result-icon\" :class=\"{ success: paymentSuccess }\">\n          <text>{{ paymentSuccess ? \"√\" : \"×\" }}</text>\n        </view>\n        <view class=\"result-title\">\n          {{ paymentSuccess ? \"申请成功\" : \"申请失败\" }}\n        </view>\n        <view class=\"result-desc\">\n          {{ paymentSuccess \n              ? \"您的退款申请已提交，将在1-3个工作日内处理\" \n              : \"请稍后重试或联系客服\" }}\n        </view>\n        <button class=\"result-btn\" @click=\"handleResultAction\">\n          {{ paymentSuccess ? \"确定\" : \"重试\" }}\n        </button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      orderId: \"\",\n      productName: \"POS机A1\",\n      amount: 99,\n      refundMethod: \"wechat\",\n      serialNumber: \"\",\n      machineImage: \"\",\n      machineImageCloud: \"\", // 云存储路径\n      showResult: false,\n      paymentSuccess: false,\n      orderInfo: {}, // 存储订单详情\n      hasRefundRequest: false, // 是否已申请退款\n      refundStatus: \"\", // 退款状态\n      refundInfo: {}, // 退款申请信息\n      isDetailMode: false, // 是否是详情查看模式\n      statusMap: {\n        \"待审核\": \"审核中\",\n        \"已通过\": \"审核通过，退款处理中\",\n        \"已拒绝\": \"审核未通过\",\n        \"已退款\": \"退款已完成\"\n      }\n    };\n  },\n  onLoad(options) {\n    console.log(\"页面加载，参数:\", options);\n    \n    // 记录原始ID\n    if (options.id) {\n      this.orderId = options.id;\n    }\n    \n    // 如果type参数为detail，则强制进入详情模式\n    if (options.type === 'detail') {\n      console.log(\"进入详情模式\");\n      \n      // ===== 强制显示进度页而非表单 =====\n      this.isDetailMode = true;\n      this.hasRefundRequest = true; // 关键！确保显示进度区域\n      \n      // 显示加载中\n      uni.showLoading({\n        title: \"加载中...\",\n        mask: true\n      });\n      \n      // 初始化云环境\n      wx.cloud.init({\n        env: \"cloud1-9grox8bwd6dbce0c\",\n        traceUser: true,\n      });\n      \n      // 直接查询数据\n      const db = wx.cloud.database();\n      console.log(\"开始查询记录:\", options.id);\n      \n      db.collection(\"refund_requests\").doc(options.id).get()\n        .then(res => {\n          console.log(\"查询结果:\", res);\n          if (res.data) {\n            // 找到数据，设置详情\n            const record = res.data;\n            this.refundInfo = record;\n            this.refundStatus = record.status || \"待审核\";\n            this.productName = record.productName || \"POS机\";\n            this.amount = record.amount || 99;\n            this.serialNumber = record.serialNumber || \"\";\n            uni.hideLoading();\n          } else {\n            throw new Error(\"未找到记录\");\n          }\n        })\n        .catch(err => {\n          console.error(\"查询失败:\", err);\n          // 即使查询失败，也保持详情模式，只是显示默认数据\n          this.refundInfo = {\n            status: \"待审核\",\n            serialNumber: \"加载失败\",\n            applyTime: new Date()\n          };\n          uni.hideLoading();\n          uni.showToast({\n            title: \"加载详情失败\",\n            icon: \"none\"\n          });\n        });\n      \n      return; // 不执行后续代码\n    }\n\n    // 初始化云环境\n    wx.cloud.init({\n      env: \"cloud1-9grox8bwd6dbce0c\",\n      traceUser: true,\n    });\n    \n    // 加载订单信息\n    this.loadOrderInfo();\n    \n    // 检查是否已申请退款\n    this.checkRefundRequest();\n  },\n  \n  // 加载退款记录详情\n  loadRefundDetailById(refundId, fromRecords = false) {\n    console.log(\"尝试加载退款记录详情:\", refundId, \"来自列表:\", fromRecords);\n    \n    // 先强制设置为已有退款申请和详情模式，确保显示进度而不是表单\n    this.hasRefundRequest = true;\n    this.isDetailMode = true;\n    \n    // 显示加载\n    uni.showLoading({\n      title: \"加载中...\",\n      mask: true\n    });\n    \n    // 直接从数据库查询，确保100%准确\n    // 初始化云环境\n    wx.cloud.init({\n      env: \"cloud1-9grox8bwd6dbce0c\",\n      traceUser: true,\n    });\n    \n    // 直接通过_id查询文档\n    const db = wx.cloud.database();\n    db.collection(\"refund_requests\").doc(refundId).get({\n      success: (res) => {\n        console.log(\"直接通过ID查询退款记录成功:\", res.data);\n        uni.hideLoading();\n        if (res.data) {\n          const refundData = res.data;\n          \n          // 设置退款记录信息\n          this.refundInfo = refundData;\n          this.refundStatus = refundData.status || \"待审核\";\n          this.orderId = refundData.orderId || this.orderId;\n          this.productName = refundData.productName || \"POS机\";\n          this.amount = refundData.amount || 99;\n          this.serialNumber = refundData.serialNumber || \"\";\n          \n          // 如果有订单ID，再尝试获取订单详情\n          if (refundData.orderId) {\n            this.loadOriginalOrder(refundData.orderId);\n          }\n        } else {\n          console.error(\"查询结果为空\");\n          uni.showToast({\n            title: \"找不到退款记录\",\n            icon: \"none\"\n          });\n        }\n      },\n      fail: (err) => {\n        console.error(\"直接查询退款记录失败:\", err);\n        uni.hideLoading();\n        \n        // 再尝试用where查询\n        this.tryWhereQuery(refundId);\n      }\n    });\n  },\n  \n  // 使用where条件查询\n  tryWhereQuery(refundId) {\n    console.log(\"尝试使用where条件查询:\", refundId);\n    uni.showLoading({\n      title: \"重试查询...\",\n      mask: true\n    });\n    \n    const db = wx.cloud.database();\n    db.collection(\"refund_requests\")\n      .where({\n        _id: refundId\n      })\n      .get({\n        success: (res) => {\n          console.log(\"where查询结果:\", res.data);\n          uni.hideLoading();\n          if (res.data && res.data.length > 0) {\n            const refundData = res.data[0];\n            \n            // 设置退款记录信息\n            this.refundInfo = refundData;\n            this.refundStatus = refundData.status || \"待审核\";\n            this.orderId = refundData.orderId || this.orderId;\n            this.productName = refundData.productName || \"POS机\";\n            this.amount = refundData.amount || 99;\n            this.serialNumber = refundData.serialNumber || \"\";\n            \n            // 如果有订单ID，再尝试获取订单详情\n            if (refundData.orderId) {\n              this.loadOriginalOrder(refundData.orderId);\n            }\n          } else {\n            console.error(\"where查询没有结果\");\n            uni.showToast({\n              title: \"找不到退款记录\",\n              icon: \"none\"\n            });\n          }\n        },\n        fail: (err) => {\n          console.error(\"where查询失败:\", err);\n          uni.hideLoading();\n          uni.showToast({\n            title: \"加载记录失败\",\n            icon: \"none\"\n          });\n        }\n      });\n  },\n  \n\n  methods: {\n    // 加载订单信息\n    loadOrderInfo() {\n      if (!this.orderId) {\n        console.log(\"未找到订单ID\");\n        return;\n      }\n      \n      uni.showLoading({\n        title: \"加载中...\"\n      });\n      \n      // 判断是否是退款记录ID而不是订单ID\n      const db = wx.cloud.database();\n      \n      // 先尝试从退款记录中查询\n      db.collection(\"refund_requests\").where({\n        _id: this.orderId\n      }).get({\n        success: (res) => {\n          if (res.data && res.data.length > 0) {\n            // 找到了退款记录\n            console.log(\"找到退款记录:\", res.data[0]);\n            const refundData = res.data[0];\n            this.hasRefundRequest = true;\n            this.refundInfo = refundData;\n            this.refundStatus = refundData.status || \"待审核\";\n            this.orderId = refundData.orderId || \"\";\n            this.productName = refundData.productName || \"POS机\";\n            this.amount = refundData.amount || 99;\n            this.serialNumber = refundData.serialNumber || \"\";\n            \n            // 如果找到退款记录，则表示是详情模式\n            this.isDetailMode = true;\n            \n            // 如果有订单ID，再尝试获取订单详情\n            if (refundData.orderId) {\n              this.loadOriginalOrder(refundData.orderId);\n            } else {\n              uni.hideLoading();\n            }\n          } else {\n            // 没有找到退款记录，尝试直接查订单\n            this.loadOrderFromId();\n          }\n        },\n        fail: (err) => {\n          console.error(\"查询退款记录失败:\", err);\n          // 尝试直接查订单\n          this.loadOrderFromId();\n        }\n      });\n    },\n    \n    // 根据ID直接从订单表加载数据\n    loadOrderFromId() {\n      const db = wx.cloud.database();\n      db.collection(\"user\").doc(this.orderId).get({\n        success: (res) => {\n          console.log(\"获取订单信息成功:\", res.data);\n          this.orderInfo = res.data;\n          this.productName = res.data.productName || \"POS机\";\n          this.amount = res.data.deposit || 99;\n          uni.hideLoading();\n        },\n        fail: (err) => {\n          console.error(\"获取订单信息失败:\", err);\n          // 设置默认值\n          this.productName = \"POS机\";\n          this.amount = 99;\n          \n          uni.hideLoading();\n          uni.showToast({\n            title: \"订单信息加载失败\",\n            icon: \"none\"\n          });\n        }\n      });\n    },\n    \n    // 加载原始订单信息\n    loadOriginalOrder(originalOrderId) {\n      if (!originalOrderId) {\n        uni.hideLoading();\n        return;\n      }\n      \n      const db = wx.cloud.database();\n      db.collection(\"user\").doc(originalOrderId).get({\n        success: (res) => {\n          console.log(\"获取原始订单成功:\", res.data);\n          this.orderInfo = res.data;\n          uni.hideLoading();\n        },\n        fail: (err) => {\n          console.error(\"获取原始订单失败:\", err);\n          uni.hideLoading();\n        }\n      });\n    },\n    \n    // 上传机器照片\n    uploadImage() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['camera', 'album'],\n        success: (res) => {\n          const tempFilePath = res.tempFilePaths[0];\n          \n          // 显示本地预览\n          this.machineImage = tempFilePath;\n          \n          // 上传到云存储\n          uni.showLoading({\n            title: \"上传中...\"\n          });\n          \n          const cloudPath = `refund/${this.orderId}_${new Date().getTime()}${tempFilePath.match(/\\.[^.]+?$/)[0]}`;\n          \n          wx.cloud.uploadFile({\n            cloudPath: cloudPath,\n            filePath: tempFilePath,\n            success: (res) => {\n              console.log(\"上传成功\", res);\n              this.machineImageCloud = res.fileID;\n              uni.hideLoading();\n              uni.showToast({\n                title: \"上传成功\",\n                icon: \"success\"\n              });\n            },\n            fail: (err) => {\n              console.error(\"上传失败\", err);\n              uni.hideLoading();\n              uni.showToast({\n                title: \"上传失败，请重试\",\n                icon: \"none\"\n              });\n            }\n          });\n        }\n      });\n    },\n\n    // 返回上一页\n    goBack() {\n      if (this.isDetailMode) {\n        // 如果是详情模式，返回退款记录列表页面\n        uni.navigateBack({\n          delta: 1\n        });\n      } else {\n        // 否则正常返回\n        uni.navigateBack();\n      }\n    },\n\n    // 处理退款申请\n    handleAction() {\n      // 表单验证\n      if (!this.serialNumber) {\n        uni.showToast({\n          title: \"请输入POS机序列号\",\n          icon: \"none\"\n        });\n        return;\n      }\n      \n      // 显示加载\n      uni.showLoading({\n        title: \"申请中...\"\n      });\n      \n      // 准备提交的数据\n      console.log(\"准备提交退款申请，订单ID:\", this.orderId);\n      console.log(\"订单信息:\", this.orderInfo);\n      \n      const refundData = {\n        orderId: this.orderId,\n        serialNumber: this.serialNumber,\n        amount: this.amount,\n        refundMethod: this.refundMethod,\n        machineImage: this.machineImageCloud,\n        applyTime: new Date(),\n        status: \"待审核\", // 待审核、已通过、已拒绝\n        productName: this.productName,\n        userId: uni.getStorageSync(\"userId\") || this.orderInfo.userId || \"\", // 优先使用本地存储的用户ID\n        refundReason: \"机器已激活\", // 退款原因\n        contactPhone: this.orderInfo.phone || this.orderInfo.contactPhone || \"\", // 联系电话\n        name: this.orderInfo.name || this.orderInfo.receiver || \"\", // 申请人姓名\n        // 添加更多关联信息，方便查询\n        orderInfo: {\n          id: this.orderId,\n          productName: this.productName,\n          deposit: this.amount\n        }\n      };\n      \n      // 保存到云数据库\n      const db = wx.cloud.database();\n      db.collection(\"refund_requests\").add({\n        data: refundData,\n        success: (res) => {\n          console.log(\"申请提交成功\", res);\n          console.log(\"生成的记录ID:\", res._id);\n          \n          // 保存记录ID到本地，方便后续查询\n          uni.setStorageSync(\"lastRefundId\", res._id);\n          uni.setStorageSync(\"lastRefundOrderId\", this.orderId);\n          \n          uni.hideLoading();\n          this.paymentSuccess = true;\n          this.showResult = true;\n          \n          // 更新refundInfo\n          this.refundInfo = {\n            ...refundData,\n            _id: res._id\n          };\n        },\n        fail: (err) => {\n          console.error(\"申请提交失败\", err);\n          uni.hideLoading();\n          this.paymentSuccess = false;\n          this.showResult = true;\n          \n          // 显示详细错误信息\n          uni.showModal({\n            title: \"提交失败\",\n            content: \"错误详情: \" + JSON.stringify(err),\n            showCancel: false\n          });\n        }\n      });\n    },\n\n          // 处理结果弹窗操作\n    handleResultAction() {\n      if (this.paymentSuccess) {\n        // 申请成功，更新页面状态显示进度\n        this.showResult = false;\n        // 设置基本的退款申请信息，以便立即显示\n        this.hasRefundRequest = true;\n        // 同时设置为详情模式，隐藏退款记录按钮\n        this.isDetailMode = true;\n        this.refundInfo = {\n          serialNumber: this.serialNumber,\n          machineImage: this.machineImageCloud,\n          status: \"待审核\",\n          applyTime: new Date()\n        };\n        \n        // 刷新云数据库的引用，确保最新的提交会被查询到\n        wx.cloud.init({\n          env: \"cloud1-9grox8bwd6dbce0c\",\n          traceUser: true,\n        });\n        \n        // 重新从数据库获取完整信息\n        setTimeout(() => {\n          this.checkRefundRequest();\n        }, 1000); // 增加延迟，确保数据库操作完成\n      } else {\n        // 申请失败，关闭弹窗重试\n        this.showResult = false;\n      }\n    },\n\n    // 检查是否已申请退款\n    checkRefundRequest() {\n      if (!this.orderId) {\n        return;\n      }\n      \n      uni.showLoading({\n        title: \"加载中...\"\n      });\n      \n      const db = wx.cloud.database();\n      db.collection(\"refund_requests\")\n        .where({\n          orderId: this.orderId\n        })\n        .orderBy(\"applyTime\", \"desc\")\n        .limit(1)\n        .get({\n          success: (res) => {\n            console.log(\"退款申请查询结果:\", res.data);\n            if (res.data && res.data.length > 0) {\n              this.hasRefundRequest = true;\n              this.refundInfo = res.data[0];\n              this.refundStatus = res.data[0].status || \"待审核\";\n            } else {\n              this.hasRefundRequest = false;\n            }\n            uni.hideLoading();\n          },\n          fail: (err) => {\n            console.error(\"查询退款申请失败:\", err);\n            this.hasRefundRequest = false;\n            uni.hideLoading();\n          }\n        });\n    },\n\n    // 格式化日期\n    formatDate(dateObj) {\n      if (!dateObj) return \"\";\n      \n      // 处理云数据库的时间格式\n      let date;\n      if (typeof dateObj === \"object\" && dateObj.toDate) {\n        date = dateObj.toDate();\n      } else if (typeof dateObj === \"string\") {\n        date = new Date(dateObj);\n      } else {\n        date = new Date(dateObj);\n      }\n      \n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, \"0\");\n      const day = String(date.getDate()).padStart(2, \"0\");\n      const hours = String(date.getHours()).padStart(2, \"0\");\n      const minutes = String(date.getMinutes()).padStart(2, \"0\");\n      \n      return `${year}-${month}-${day} ${hours}:${minutes}`;\n    },\n\n    // 预览图片\n    previewImage(fileID) {\n      wx.cloud.getTempFileURL({\n        fileList: [fileID],\n        success: (res) => {\n          const tempUrl = res.fileList[0].tempFileURL;\n          uni.previewImage({\n            urls: [tempUrl],\n            current: tempUrl\n          });\n        },\n        fail: (err) => {\n          console.error(\"获取图片链接失败:\", err);\n          uni.showToast({\n            title: \"图片加载失败\",\n            icon: \"none\"\n          });\n        }\n      });\n    },\n\n    // 重置申请（当申请被拒绝时）\n    resetApplication() {\n      this.hasRefundRequest = false;\n      this.serialNumber = this.refundInfo.serialNumber || \"\";\n      this.machineImage = \"\";\n      this.machineImageCloud = \"\";\n    },\n\n    // 联系客服\n    contactService() {\n      uni.showActionSheet({\n        itemList: [\"在线客服\", \"电话客服\"],\n        success: (res) => {\n          if (res.tapIndex === 0) {\n            // 在线客服\n            uni.showToast({\n              title: \"正在接入在线客服...\",\n              icon: \"none\"\n            });\n          } else if (res.tapIndex === 1) {\n            // 电话客服\n            uni.makePhoneCall({\n              phoneNumber: \"400-123-4567\",\n              fail: () => {\n                uni.showToast({\n                  title: \"拨打失败\",\n                  icon: \"none\"\n                });\n              }\n            });\n          }\n        }\n      });\n    },\n\n    // 跳转到退款记录页面\n    goToRefundOrders() {\n      uni.navigateTo({\n        url: \"/pages/deposit/refund-orders\"\n      });\n    },\n  },\n};\n</script>\n\n<style>\n.deposit-container {\n  padding: 30rpx;\n}\n\n.status-card {\n  background-color: #1296db;\n  border-radius: 12rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  color: #fff;\n  box-shadow: 0 4rpx 20rpx rgba(18, 150, 219, 0.2);\n}\n\n.card-header {\n  margin-bottom: 30rpx;\n}\n\n.card-title {\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.refund-records-btn {\n  background-color: rgba(255, 255, 255, 0.2);\n  padding: 8rpx 16rpx;\n  border-radius: 30rpx;\n  display: flex;\n  align-items: center;\n  font-size: 24rpx;\n}\n\n.arrow {\n  margin-left: 6rpx;\n}\n\n.amount {\n  font-size: 72rpx;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n}\n\n.desc {\n  font-size: 28rpx;\n  opacity: 0.8;\n  margin-bottom: 30rpx;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: column;\n  font-size: 24rpx;\n  opacity: 0.8;\n}\n\n.payment-methods,\n.notice {\n  background-color: #fff;\n  border-radius: 12rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n  color: #333;\n}\n\n.payment-method {\n  display: flex;\n  align-items: center;\n  padding: 20rpx 0;\n  border-bottom: 1rpx solid #f5f5f5;\n}\n\n.payment-method:last-child {\n  border-bottom: none;\n}\n\n.payment-method.active {\n  background-color: rgba(18, 150, 219, 0.05);\n}\n\n.payment-method image {\n  width: 60rpx;\n  height: 60rpx;\n  margin-right: 20rpx;\n}\n\n.method-name {\n  flex: 1;\n  font-size: 30rpx;\n  color: #333;\n}\n\n.method-select {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n  border: 1rpx solid #ddd;\n  position: relative;\n}\n\n.payment-method.active .method-select:after {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 24rpx;\n  height: 24rpx;\n  border-radius: 50%;\n  background-color: #1296db;\n}\n\n.notice-item {\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 15rpx;\n}\n\n.dot {\n  margin-right: 10rpx;\n  color: #1296db;\n}\n\n.notice-text {\n  flex: 1;\n  font-size: 28rpx;\n  color: #666;\n  line-height: 1.5;\n}\n\n/* 序列号输入相关样式 */\n.serial-number-section {\n  background-color: #fff;\n  border-radius: 12rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n}\n\n.serial-input {\n  width: 100%;\n  height: 90rpx;\n  border: 1px solid #ddd;\n  border-radius: 8rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n  box-sizing: border-box;\n}\n\n.serial-tip {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 10rpx;\n}\n\n/* 图片上传相关样式 */\n.upload-section {\n  margin-top: 30rpx;\n}\n\n.upload-title {\n  font-size: 28rpx;\n  color: #333;\n  margin-bottom: 15rpx;\n}\n\n.upload-box {\n  width: 100%;\n  height: 300rpx;\n  border: 1px dashed #ddd;\n  border-radius: 8rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n}\n\n.upload-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.upload-icon {\n  font-size: 60rpx;\n  color: #ddd;\n  line-height: 1;\n}\n\n.upload-text {\n  font-size: 26rpx;\n  color: #999;\n  margin-top: 10rpx;\n}\n\n.preview-image {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n\n.upload-tip {\n  font-size: 24rpx;\n  color: #999;\n  margin-top: 10rpx;\n}\n\n.action-buttons {\n  display: flex;\n  margin-top: 50rpx;\n}\n\n.action-btn {\n  flex: 1;\n  height: 90rpx;\n  border-radius: 45rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 32rpx;\n  margin: 0 15rpx;\n}\n\n.action-btn.cancel {\n  background-color: #f5f5f5;\n  color: #666;\n}\n\n.action-btn.confirm {\n  background-color: #1296db;\n  color: #fff;\n}\n\n.result-popup {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 999;\n}\n\n.result-content {\n  width: 600rpx;\n  background-color: #fff;\n  border-radius: 12rpx;\n  padding: 50rpx 30rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.result-icon {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n  background-color: #ff5252;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 80rpx;\n  margin-bottom: 30rpx;\n}\n\n.result-icon.success {\n  background-color: #67c23a;\n}\n\n.result-title {\n  font-size: 36rpx;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n}\n\n.result-desc {\n  font-size: 28rpx;\n  color: #666;\n  text-align: center;\n  margin-bottom: 40rpx;\n}\n\n.result-btn {\n  width: 400rpx;\n  height: 90rpx;\n  border-radius: 45rpx;\n  background-color: #1296db;\n  color: #fff;\n  font-size: 32rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* 退款进度状态样式 */\n.refund-status-section {\n  background-color: #fff;\n  border-radius: 12rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n}\n\n.progress-bar {\n  position: relative;\n  padding: 30rpx 0;\n  margin: 20rpx 0 40rpx;\n}\n\n.progress-steps {\n  display: flex;\n  justify-content: space-between;\n  position: relative;\n  z-index: 2;\n}\n\n.progress-line {\n  position: absolute;\n  top: 60rpx;\n  left: 40rpx;\n  right: 40rpx;\n  height: 2rpx;\n  background-color: #eaeaea;\n  z-index: 1;\n}\n\n.progress-step {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 33.33%;\n}\n\n.step-dot {\n  width: 20rpx;\n  height: 20rpx;\n  border-radius: 50%;\n  background-color: #eaeaea;\n  margin-bottom: 15rpx;\n}\n\n.step-text {\n  font-size: 24rpx;\n  color: #999;\n  margin-bottom: 8rpx;\n}\n\n.step-time {\n  font-size: 20rpx;\n  color: #bbb;\n}\n\n.progress-step.active .step-dot {\n  background-color: #67c23a;\n}\n\n.progress-step.active .step-text {\n  color: #333;\n}\n\n.progress-step.current .step-dot {\n  width: 24rpx;\n  height: 24rpx;\n  background-color: #1296db;\n  box-shadow: 0 0 0 6rpx rgba(18, 150, 219, 0.2);\n}\n\n.progress-step.current .step-text {\n  color: #1296db;\n  font-weight: bold;\n}\n\n.current-status {\n  background-color: #f8f8f8;\n  border-radius: 8rpx;\n  padding: 20rpx;\n  margin-bottom: 20rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.status-label {\n  font-size: 28rpx;\n  color: #666;\n}\n\n.status-value {\n  font-size: 30rpx;\n  color: #1296db;\n  font-weight: bold;\n}\n\n.status-rejected {\n  color: #ff5252;\n}\n\n.reject-reason {\n  background-color: #fff0f0;\n  border-radius: 8rpx;\n  padding: 20rpx;\n  margin-bottom: 20rpx;\n}\n\n.reason-label {\n  font-size: 28rpx;\n  color: #ff5252;\n  margin-bottom: 10rpx;\n}\n\n.reason-value {\n  font-size: 26rpx;\n  color: #666;\n}\n\n.refund-detail {\n  margin-top: 30rpx;\n}\n\n.detail-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 15rpx 0;\n  font-size: 28rpx;\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.detail-label {\n  color: #666;\n}\n\n.detail-value {\n  color: #333;\n  font-weight: 500;\n}\n\n.img-preview {\n  color: #1296db;\n  text-decoration: underline;\n}\n\n.reapply-btn-wrap {\n  margin-top: 30rpx;\n  display: flex;\n  justify-content: center;\n}\n\n.reapply-btn {\n  width: 400rpx;\n  height: 80rpx;\n  background-color: #ff5252;\n  color: #fff;\n  font-size: 28rpx;\n  border-radius: 40rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.action-btn.contact {\n  background-color: #67c23a;\n  color: #fff;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/wx-pos/pages/deposit/pay.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","wx","res"],"mappings":"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"}