{"version":3,"names":["_sfc_main","data","userInfo","avatar","nickName","userId","vipLevel","wallet","couponCount","points","orderMenus","icon","text","url","badge","toolsMenus","isNew","functionMenus","tag","supportMenus","onLoad","common_vendor","wx$1","cloud","$isInitialized","init","env","traceUser","checkLoginStatus","onShow","fetchUserData","onPullDownRefresh","setTimeout","index","stopPullDownRefresh","methods","_this","getStorageSync","JSON","parse","db","database","collection","doc","get","success","res","__f__","setStorageSync","stringify","clearUserInfo","fail","err","errCode","errMsg","includes","removeStorageSync","_this2","_id","showLoading","title","mask","fetchUserOrderCount","hideLoading","_this3","command","where","status","count","then","total","goToSettings","handleWxLogin","navigateTo","goToOrderList","contactCustomerService","_this4","getUserProfile","desc","login","loginRes","code","avatarUrl","Date","getTime","openId","gender","country","province","city","language","createTime","lastLoginTime","phone","isPhoneVerified","isProfileCompleted","queryRes","length","existUser","update","finishLogin","checkUserInfoCompletion","catch","add","addRes","showToast","_this5","eventChannel","getOpenerEventChannel","emit","verifyPhoneNumber","_this6","completeUserProfile","profileData","_this7","_objectSpread2","navigateBack","showActionSheet","itemList","tapIndex","makePhoneCall","phoneNumber","showCouponTip","duration","logout","_this8","showModal","content","confirm","wx","createPage","MiniProgramPage"],"sources":["index.vue","cGFnZXMvdXNlci9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"user-container\">\r\n    <!-- 用户信息 -->\r\n    <view class=\"user-info-section\">\r\n      <view class=\"user-info-bg\">\r\n        <image\r\n          src=\"https://cdn-icons-png.flaticon.com/128/7505/7505765.png\"\r\n          mode=\"aspectFill\"\r\n          class=\"bg-image\"\r\n        ></image>\r\n      </view>\r\n      <view class=\"user-info-content\">\r\n        <view\r\n          class=\"user-avatar\"\r\n          @click=\"!userInfo.nickName && handleWxLogin()\"\r\n        >\r\n          <image\r\n            :src=\"\r\n              userInfo.avatar ||\r\n              'https://cdn-icons-png.flaticon.com/128/847/847969.png'\r\n            \"\r\n            mode=\"aspectFill\"\r\n          ></image>\r\n          <view class=\"avatar-edit\" v-if=\"userInfo.nickName\">\r\n            <text class=\"edit-icon\">✏️</text>\r\n          </view>\r\n        </view>\r\n        <view\r\n          class=\"user-detail\"\r\n          @click=\"!userInfo.nickName && handleWxLogin()\"\r\n        >\r\n          <view class=\"user-name\">{{\r\n            userInfo.nickName || \"点击微信登录\"\r\n          }}</view>\r\n          <view class=\"user-id\" v-if=\"userInfo.nickName\"\r\n            >ID: {{ userInfo.userId }}</view\r\n          >\r\n          <view class=\"vip-tag\" v-if=\"userInfo.nickName\">{{\r\n            userInfo.vipLevel || \"普通用户\"\r\n          }}</view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 用户数据概览 -->\r\n    <view class=\"stats-card\">\r\n      <view class=\"stats-item\" @click=\"navigateTo('/pages/deposit/pay')\">\r\n        <view class=\"stats-value\">{{\r\n          userInfo.nickName ? userInfo.wallet || \"￥0\" : \"--\"\r\n        }}</view>\r\n        <view class=\"stats-label\">我的押金</view>\r\n      </view>\r\n      <view class=\"stats-divider\"></view>\r\n      <view class=\"stats-item\" @click=\"showCouponTip()\">\r\n        <view class=\"stats-value\">{{\r\n          userInfo.nickName ? userInfo.couponCount || 0 : \"--\"\r\n        }}</view>\r\n        <view class=\"stats-label\">优惠券</view>\r\n      </view>\r\n      <view class=\"stats-divider\"></view>\r\n      <view class=\"stats-item\" @click=\"navigateTo('/pages/user/points')\">\r\n        <view class=\"stats-value\">{{\r\n          userInfo.nickName ? userInfo.points || 0 : \"--\"\r\n        }}</view>\r\n        <view class=\"stats-label\">积分</view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 订单管理 -->\r\n    <view class=\"menu-card\">\r\n      <view class=\"menu-header\">\r\n        <view class=\"header-title-wrap\">\r\n          <image\r\n            src=\"https://cdn-icons-png.flaticon.com/128/3500/3500833.png\"\r\n            class=\"header-icon\"\r\n          ></image>\r\n          <text class=\"header-title\">我的订单</text>\r\n        </view>\r\n        <view class=\"header-more\" @click=\"goToOrderList\">\r\n          <text>全部订单</text>\r\n          <image\r\n            src=\"https://cdn-icons-png.flaticon.com/128/271/271228.png\"\r\n            class=\"arrow-icon\"\r\n          ></image>\r\n        </view>\r\n      </view>\r\n      <view class=\"menu-content\">\r\n        <view\r\n          class=\"menu-item\"\r\n          v-for=\"(item, index) in orderMenus\"\r\n          :key=\"index\"\r\n          @click=\"navigateTo(item.url)\"\r\n        >\r\n          <image :src=\"item.icon\" class=\"item-icon\"></image>\r\n          <text class=\"menu-text\">{{ item.text }}</text>\r\n          <view class=\"badge\" v-if=\"item.badge\">{{ item.badge }}</view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 常用工具 -->\r\n    <view class=\"menu-card\">\r\n      <view class=\"menu-header\">\r\n        <view class=\"header-title-wrap\">\r\n          <image\r\n            src=\"https://cdn-icons-png.flaticon.com/128/2917/2917242.png\"\r\n            class=\"header-icon\"\r\n          ></image>\r\n          <text class=\"header-title\">我的服务</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"tools-grid\">\r\n        <view\r\n          class=\"tool-item\"\r\n          v-for=\"(item, index) in toolsMenus\"\r\n          :key=\"index\"\r\n          @click=\"navigateTo(item.url)\"\r\n        >\r\n          <image :src=\"item.icon\" class=\"tool-icon\"></image>\r\n          <text class=\"tool-text\">{{ item.text }}</text>\r\n          <text class=\"tool-new\" v-if=\"item.isNew\">New</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 功能菜单 -->\r\n    <view class=\"menu-card\">\r\n      <view class=\"menu-list\">\r\n        <view\r\n          class=\"menu-list-item\"\r\n          v-for=\"(item, index) in functionMenus\"\r\n          :key=\"index\"\r\n          @click=\"navigateTo(item.url)\"\r\n        >\r\n          <view class=\"list-item-left\">\r\n            <image :src=\"item.icon\" class=\"list-item-icon\"></image>\r\n            <text class=\"list-item-text\">{{ item.text }}</text>\r\n            <view class=\"tag\" v-if=\"item.tag\">{{ item.tag }}</view>\r\n          </view>\r\n          <image\r\n            src=\"https://cdn-icons-png.flaticon.com/128/271/271228.png\"\r\n            class=\"arrow-icon\"\r\n          ></image>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 客服与反馈 -->\r\n    <view class=\"menu-card\">\r\n      <view class=\"menu-list\">\r\n        <view\r\n          class=\"menu-list-item\"\r\n          v-for=\"(item, index) in supportMenus\"\r\n          :key=\"index\"\r\n          @click=\"navigateTo(item.url)\"\r\n        >\r\n          <view class=\"list-item-left\">\r\n            <image :src=\"item.icon\" class=\"list-item-icon\"></image>\r\n            <text class=\"list-item-text\">{{ item.text }}</text>\r\n          </view>\r\n          <image\r\n            src=\"https://cdn-icons-png.flaticon.com/128/271/271228.png\"\r\n            class=\"arrow-icon\"\r\n          ></image>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 广告卡片 -->\r\n    <view class=\"promo-card\" @click=\"navigateTo('/pages/activity/promotion')\">\r\n      <image\r\n        src=\"https://cdn-icons-png.flaticon.com/128/1048/1048332.png\"\r\n        class=\"promo-icon\"\r\n      ></image>\r\n      <view class=\"promo-content\">\r\n        <view class=\"promo-title\">推广返现活动</view>\r\n        <view class=\"promo-desc\">邀请新用户，享受推广奖励</view>\r\n      </view>\r\n      <image\r\n        src=\"https://cdn-icons-png.flaticon.com/128/271/271228.png\"\r\n        class=\"arrow-icon\"\r\n      ></image>\r\n    </view>\r\n\r\n    <!-- 退出登录按钮 -->\r\n    <view class=\"logout-btn\" v-if=\"userInfo.nickName\" @click=\"logout\">\r\n      退出登录\r\n    </view>\r\n\r\n    <!-- 版本信息 -->\r\n    <view class=\"version-info\">\r\n      <text>版本 1.1.0</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: {\r\n        avatar: \"\",\r\n        nickName: \"\",\r\n        userId: \"\",\r\n        vipLevel: \"\",\r\n        wallet: \"￥99\",\r\n        couponCount: 2,\r\n        points: 356,\r\n      },\r\n      orderMenus: [\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/2441/2441009.png\",\r\n          text: \"待审核\",\r\n          url: \"/pages/order/list?type=pending\",\r\n          badge: 0,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/4521/4521931.png\",\r\n          text: \"待发货\",\r\n          url: \"/pages/order/list?type=approved\",\r\n          badge: 1,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/2203/2203145.png\",\r\n          text: \"已发货\",\r\n          url: \"/pages/order/list?type=shipped\",\r\n          badge: 0,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/4406/4406665.png\",\r\n          text: \"已完成\",\r\n          url: \"/pages/order/list?type=completed\",\r\n          badge: 0,\r\n        },\r\n      ],\r\n      toolsMenus: [\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/1728/1728853.png\",\r\n          text: \"激活POS机\",\r\n          url: \"/pages/service/activate\",\r\n          isNew: false,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/3349/3349234.png\",\r\n          text: \"在线预约\",\r\n          url: \"/pages/service/appointment\",\r\n          isNew: true,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/1584/1584812.png\",\r\n          text: \"维修申请\",\r\n          url: \"/pages/service/repair\",\r\n          isNew: false,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/2991/2991251.png\",\r\n          text: \"使用教程\",\r\n          url: \"/pages/guide/index\",\r\n          isNew: false,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/4149/4149888.png\",\r\n          text: \"资料下载\",\r\n          url: \"/pages/guide/download\",\r\n          isNew: false,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/3371/3371540.png\",\r\n          text: \"查看发票\",\r\n          url: \"/pages/user/invoice\",\r\n          isNew: false,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/2258/2258843.png\",\r\n          text: \"码商加盟\",\r\n          url: \"/pages/promoter/join\",\r\n          isNew: true,\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/2099/2099203.png\",\r\n          text: \"更多服务\",\r\n          url: \"/pages/service/more\",\r\n          isNew: false,\r\n        },\r\n      ],\r\n      functionMenus: [\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/2474/2474450.png\",\r\n          text: \"我的押金\",\r\n          url: \"/pages/deposit/pay\",\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/1144/1144760.png\",\r\n          text: \"收货地址\",\r\n          url: \"/pages/user/address\",\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/3781/3781605.png\",\r\n          text: \"账户安全\",\r\n          url: \"/pages/user/security\",\r\n          tag: \"重要\",\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/1384/1384023.png\",\r\n          text: \"推广中心\",\r\n          url: \"/pages/promoter/index\",\r\n        },\r\n      ],\r\n      supportMenus: [\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/1671/1671060.png\",\r\n          text: \"在线客服\",\r\n          url: \"customer_service\",\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/471/471664.png\",\r\n          text: \"常见问题\",\r\n          url: \"/pages/help/index\",\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/2521/2521826.png\",\r\n          text: \"意见反馈\",\r\n          url: \"/pages/help/feedback\",\r\n        },\r\n        {\r\n          icon: \"https://cdn-icons-png.flaticon.com/128/1028/1028908.png\",\r\n          text: \"关于我们\",\r\n          url: \"/pages/help/about\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  onLoad() {\r\n    // 初始化云环境\r\n    if (!wx.cloud.$isInitialized) {\r\n      wx.cloud.init({\r\n        env: \"cloud1-9grox8bwd6dbce0c\",\r\n        traceUser: true,\r\n      });\r\n    }\r\n\r\n    // 页面加载时检查登录状态\r\n    this.checkLoginStatus();\r\n  },\r\n  onShow() {\r\n    // 每次显示页面时检查登录状态\r\n    this.checkLoginStatus();\r\n    this.fetchUserData();\r\n  },\r\n  onPullDownRefresh() {\r\n    // 支持下拉刷新\r\n    this.checkLoginStatus();\r\n    this.fetchUserData();\r\n    setTimeout(() => {\r\n      uni.stopPullDownRefresh();\r\n    }, 1000);\r\n  },\r\n  methods: {\r\n    // 检查登录状态\r\n    checkLoginStatus() {\r\n      // 从本地缓存获取用户信息\r\n      const userInfo = uni.getStorageSync(\"userInfo\");\r\n      if (userInfo) {\r\n        this.userInfo = JSON.parse(userInfo);\r\n\r\n        // 获取存储的用户ID\r\n        const userId = uni.getStorageSync(\"userId\");\r\n        if (userId) {\r\n          // 通过ID从云数据库验证用户登录状态\r\n          const db = wx.cloud.database();\r\n          db.collection(\"userinfo\")\r\n            .doc(userId)\r\n            .get({\r\n              success: (res) => {\r\n                if (res.data) {\r\n                  console.log(\"用户验证成功\");\r\n                  // 更新本地用户信息\r\n                  this.userInfo = res.data;\r\n                  uni.setStorageSync(\"userInfo\", JSON.stringify(res.data));\r\n                } else {\r\n                  console.log(\"用户信息已失效，清除登录状态\");\r\n                  this.clearUserInfo();\r\n                }\r\n              },\r\n              fail: (err) => {\r\n                console.error(\"验证用户状态失败\", err);\r\n                // 如果错误是因为记录不存在，清除登录状态\r\n                if (err.errCode === -1 || err.errMsg.includes(\"not exist\")) {\r\n                  this.clearUserInfo();\r\n                }\r\n              },\r\n            });\r\n        }\r\n      }\r\n    },\r\n\r\n    // 清除用户信息\r\n    clearUserInfo() {\r\n      uni.removeStorageSync(\"userInfo\");\r\n      uni.removeStorageSync(\"userId\");\r\n      this.userInfo = {\r\n        avatar: \"\",\r\n        nickName: \"\",\r\n        userId: \"\",\r\n        vipLevel: \"\",\r\n        wallet: \"\",\r\n        couponCount: 0,\r\n        points: 0,\r\n      };\r\n    },\r\n\r\n    // 获取用户数据\r\n    fetchUserData() {\r\n      // 如果用户已登录，获取最新的用户数据\r\n      if (this.userInfo.nickName && this.userInfo._id) {\r\n        uni.showLoading({\r\n          title: \"刷新中...\",\r\n          mask: false,\r\n        });\r\n\r\n        const db = wx.cloud.database();\r\n        db.collection(\"userinfo\")\r\n          .doc(this.userInfo._id)\r\n          .get({\r\n            success: (res) => {\r\n              if (res.data) {\r\n                console.log(\"获取最新用户数据成功\");\r\n\r\n                // 更新用户信息\r\n                this.userInfo = res.data;\r\n\r\n                // 更新存储\r\n                uni.setStorageSync(\"userInfo\", JSON.stringify(this.userInfo));\r\n\r\n                // 查询用户的订单数量\r\n                this.fetchUserOrderCount();\r\n              }\r\n              uni.hideLoading();\r\n            },\r\n            fail: (err) => {\r\n              console.error(\"获取用户数据失败\", err);\r\n              uni.hideLoading();\r\n            },\r\n          });\r\n      }\r\n    },\r\n\r\n    // 获取用户订单数量\r\n    fetchUserOrderCount() {\r\n      if (!this.userInfo._id) return;\r\n\r\n      const db = wx.cloud.database();\r\n      const _ = db.command;\r\n\r\n      // 获取待审核订单数量\r\n      db.collection(\"user\")\r\n        .where({\r\n          userId: this.userInfo._id,\r\n          status: \"待审核\",\r\n        })\r\n        .count()\r\n        .then((res) => {\r\n          this.orderMenus[0].badge = res.total || 0;\r\n        });\r\n\r\n      // 获取待发货订单数量\r\n      db.collection(\"user\")\r\n        .where({\r\n          userId: this.userInfo._id,\r\n          status: \"待发货\",\r\n        })\r\n        .count()\r\n        .then((res) => {\r\n          this.orderMenus[1].badge = res.total || 0;\r\n        });\r\n\r\n      // 获取已发货订单数量\r\n      db.collection(\"user\")\r\n        .where({\r\n          userId: this.userInfo._id,\r\n          status: \"已发货\",\r\n        })\r\n        .count()\r\n        .then((res) => {\r\n          this.orderMenus[2].badge = res.total || 0;\r\n        });\r\n\r\n      // 获取已完成订单数量\r\n      db.collection(\"user\")\r\n        .where({\r\n          userId: this.userInfo._id,\r\n          status: \"已完成\",\r\n        })\r\n        .count()\r\n        .then((res) => {\r\n          this.orderMenus[3].badge = res.total || 0;\r\n        });\r\n    },\r\n\r\n    // 跳转到设置页面\r\n    goToSettings() {\r\n      if (!this.userInfo.nickName) {\r\n        this.handleWxLogin();\r\n        return;\r\n      }\r\n      uni.navigateTo({\r\n        url: \"/pages/user/settings\",\r\n      });\r\n    },\r\n\r\n    // 跳转到订单列表\r\n    goToOrderList() {\r\n      if (!this.userInfo.nickName) {\r\n        this.handleWxLogin();\r\n        return;\r\n      }\r\n      uni.navigateTo({\r\n        url: \"/pages/order/list\",\r\n      });\r\n    },\r\n\r\n    // 导航到指定页面\r\n    navigateTo(url) {\r\n      // 如果是客服，调用客服功能\r\n      if (url === \"customer_service\") {\r\n        this.contactCustomerService();\r\n        return;\r\n      }\r\n\r\n      // 如果用户未登录且不是帮助/关于页面，先去登录\r\n      if (\r\n        !this.userInfo.nickName &&\r\n        !url.includes(\"/pages/help/\") &&\r\n        !url.includes(\"/pages/guide/\")\r\n      ) {\r\n        this.handleWxLogin();\r\n        return;\r\n      }\r\n\r\n      uni.navigateTo({\r\n        url: url,\r\n      });\r\n    },\r\n\r\n    // 微信登录方法\r\n    handleWxLogin() {\r\n      // 显示加载中\r\n      uni.showLoading({\r\n        title: \"登录中...\",\r\n        mask: true,\r\n      });\r\n\r\n      // 调用微信登录\r\n      wx.getUserProfile({\r\n        desc: \"用于完善会员资料\",\r\n        success: (res) => {\r\n          if (res.userInfo) {\r\n            // 获取登录凭证\r\n            wx.login({\r\n              success: (loginRes) => {\r\n                if (loginRes.code) {\r\n                  // 获取到用户信息\r\n                  const userInfo = {\r\n                    avatar:\r\n                      res.userInfo.avatarUrl ||\r\n                      \"https://cdn-icons-png.flaticon.com/128/924/924915.png\",\r\n                    nickName: res.userInfo.nickName || \"微信用户\",\r\n                    userId: \"U\" + new Date().getTime(),\r\n                    openId: \"\", // 将由服务器返回\r\n                    vipLevel: \"普通用户\",\r\n                    wallet: \"￥0\",\r\n                    couponCount: 0,\r\n                    points: 100,\r\n                    gender: res.userInfo.gender,\r\n                    country: res.userInfo.country,\r\n                    province: res.userInfo.province,\r\n                    city: res.userInfo.city,\r\n                    language: res.userInfo.language,\r\n                    createTime: new Date(),\r\n                    lastLoginTime: new Date(),\r\n                    phone: \"\", // 添加手机号字段\r\n                    isPhoneVerified: false, // 是否已验证手机号\r\n                    isProfileCompleted: false, // 是否已完善个人资料\r\n                  };\r\n\r\n                  // 调用云函数获取openid（真实项目中需要云函数，这里直接存储模拟数据）\r\n                  // 获取云数据库实例\r\n                  const db = wx.cloud.database();\r\n\r\n                  // 查询是否已经存在该用户信息\r\n                  db.collection(\"userinfo\")\r\n                    .where({\r\n                      nickName: userInfo.nickName,\r\n                      // 实际项目中应该使用openid查询\r\n                    })\r\n                    .get()\r\n                    .then((queryRes) => {\r\n                      if (queryRes.data && queryRes.data.length > 0) {\r\n                        // 已存在该用户，更新信息\r\n                        const existUser = queryRes.data[0];\r\n                        const userId = existUser._id;\r\n\r\n                        db.collection(\"userinfo\")\r\n                          .doc(userId)\r\n                          .update({\r\n                            data: {\r\n                              avatar: userInfo.avatar,\r\n                              lastLoginTime: new Date(),\r\n                              // 更新其他可能变化的信息\r\n                            },\r\n                          })\r\n                          .then(() => {\r\n                            console.log(\"用户信息更新成功\");\r\n\r\n                            // 合并已有信息和新信息\r\n                            userInfo._id = userId;\r\n                            userInfo.points =\r\n                              existUser.points || userInfo.points;\r\n                            userInfo.vipLevel =\r\n                              existUser.vipLevel || userInfo.vipLevel;\r\n                            userInfo.wallet =\r\n                              existUser.wallet || userInfo.wallet;\r\n                            userInfo.couponCount =\r\n                              existUser.couponCount || userInfo.couponCount;\r\n                            userInfo.phone = existUser.phone || \"\";\r\n                            userInfo.isPhoneVerified =\r\n                              existUser.isPhoneVerified || false;\r\n                            userInfo.isProfileCompleted =\r\n                              existUser.isProfileCompleted || false;\r\n\r\n                            // 完成登录流程\r\n                            this.finishLogin(userInfo);\r\n\r\n                            // 检查是否需要验证手机号或完善资料\r\n                            this.checkUserInfoCompletion(userInfo);\r\n                          })\r\n                          .catch((err) => {\r\n                            console.error(\"更新用户信息失败\", err);\r\n                            this.finishLogin(userInfo);\r\n                            this.checkUserInfoCompletion(userInfo);\r\n                          });\r\n                      } else {\r\n                        // 不存在则添加新用户\r\n                        db.collection(\"userinfo\")\r\n                          .add({\r\n                            data: userInfo,\r\n                          })\r\n                          .then((addRes) => {\r\n                            console.log(\"用户信息存储成功\", addRes);\r\n                            userInfo._id = addRes._id;\r\n                            this.finishLogin(userInfo);\r\n\r\n                            // 新用户需要验证手机号和完善资料\r\n                            this.checkUserInfoCompletion(userInfo);\r\n                          })\r\n                          .catch((err) => {\r\n                            console.error(\"存储用户信息失败\", err);\r\n                            this.finishLogin(userInfo);\r\n                            this.checkUserInfoCompletion(userInfo);\r\n                          });\r\n                      }\r\n                    })\r\n                    .catch((err) => {\r\n                      console.error(\"查询用户信息失败\", err);\r\n                      this.finishLogin(userInfo);\r\n                      this.checkUserInfoCompletion(userInfo);\r\n                    });\r\n                } else {\r\n                  uni.hideLoading();\r\n                  console.error(\"wx.login 失败\", loginRes);\r\n                  uni.showToast({\r\n                    title: \"登录失败\",\r\n                    icon: \"none\",\r\n                  });\r\n                }\r\n              },\r\n              fail: (err) => {\r\n                uni.hideLoading();\r\n                console.error(\"wx.login 接口调用失败\", err);\r\n                uni.showToast({\r\n                  title: \"网络错误，请重试\",\r\n                  icon: \"none\",\r\n                });\r\n              },\r\n            });\r\n          }\r\n        },\r\n        fail: (err) => {\r\n          uni.hideLoading();\r\n          console.error(\"微信登录失败:\", err);\r\n          uni.showToast({\r\n            title: \"您取消了授权\",\r\n            icon: \"none\",\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    // 完成登录流程\r\n    finishLogin(userInfo) {\r\n      // 存储用户信息到本地缓存\r\n      uni.setStorageSync(\"userInfo\", JSON.stringify(userInfo));\r\n\r\n      // 存储用户ID，用于关联订单\r\n      uni.setStorageSync(\"userId\", userInfo._id);\r\n\r\n      // 更新当前页面数据\r\n      this.userInfo = userInfo;\r\n\r\n      // 隐藏加载框并提示登录成功\r\n      uni.hideLoading();\r\n      uni.showToast({\r\n        title: \"登录成功\",\r\n        icon: \"success\",\r\n      });\r\n    },\r\n\r\n    // 检查用户信息完善状态\r\n    checkUserInfoCompletion(userInfo) {\r\n      if (!userInfo.isPhoneVerified) {\r\n        // 未验证手机号，跳转到手机号验证页面\r\n        setTimeout(() => {\r\n          uni.navigateTo({\r\n            url: \"/pages/user/phone-verify\",\r\n            success: () => {\r\n              // 向验证页面传递用户ID\r\n              const eventChannel = this.getOpenerEventChannel();\r\n              eventChannel.emit(\"getUserId\", { userId: userInfo._id });\r\n            },\r\n          });\r\n        }, 1000);\r\n      } else if (!userInfo.isProfileCompleted) {\r\n        // 未完善个人资料，跳转到资料完善页面\r\n        setTimeout(() => {\r\n          uni.navigateTo({\r\n            url: \"/pages/user/profile-setup\",\r\n            success: () => {\r\n              // 向资料页面传递用户ID\r\n              const eventChannel = this.getOpenerEventChannel();\r\n              eventChannel.emit(\"getUserId\", { userId: userInfo._id });\r\n            },\r\n          });\r\n        }, 1000);\r\n      }\r\n    },\r\n\r\n    // 验证手机号\r\n    verifyPhoneNumber(phone, code, userId) {\r\n      // 显示加载中\r\n      uni.showLoading({\r\n        title: \"验证中...\",\r\n        mask: true,\r\n      });\r\n\r\n      // 实际项目中应该调用云函数验证验证码\r\n      // 这里模拟验证成功\r\n      const db = wx.cloud.database();\r\n      db.collection(\"userinfo\")\r\n        .doc(userId)\r\n        .update({\r\n          data: {\r\n            phone: phone,\r\n            isPhoneVerified: true,\r\n          },\r\n        })\r\n        .then(() => {\r\n          console.log(\"手机号验证成功\");\r\n\r\n          // 更新本地用户信息\r\n          let userInfo = JSON.parse(uni.getStorageSync(\"userInfo\") || \"{}\");\r\n          userInfo.phone = phone;\r\n          userInfo.isPhoneVerified = true;\r\n          uni.setStorageSync(\"userInfo\", JSON.stringify(userInfo));\r\n\r\n          // 更新当前页面数据\r\n          this.userInfo.phone = phone;\r\n          this.userInfo.isPhoneVerified = true;\r\n\r\n          uni.hideLoading();\r\n          uni.showToast({\r\n            title: \"验证成功\",\r\n            icon: \"success\",\r\n          });\r\n\r\n          // 如果个人资料未完善，引导去完善\r\n          if (!userInfo.isProfileCompleted) {\r\n            setTimeout(() => {\r\n              uni.navigateTo({\r\n                url: \"/pages/user/profile-setup\",\r\n              });\r\n            }, 1000);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"手机号验证失败\", err);\r\n          uni.hideLoading();\r\n          uni.showToast({\r\n            title: \"验证失败\",\r\n            icon: \"none\",\r\n          });\r\n        });\r\n    },\r\n\r\n    // 完善用户资料\r\n    completeUserProfile(profileData, userId) {\r\n      // 显示加载中\r\n      uni.showLoading({\r\n        title: \"保存中...\",\r\n        mask: true,\r\n      });\r\n\r\n      const db = wx.cloud.database();\r\n      db.collection(\"userinfo\")\r\n        .doc(userId)\r\n        .update({\r\n          data: {\r\n            ...profileData,\r\n            isProfileCompleted: true,\r\n          },\r\n        })\r\n        .then(() => {\r\n          console.log(\"用户资料完善成功\");\r\n\r\n          // 更新本地用户信息\r\n          let userInfo = JSON.parse(uni.getStorageSync(\"userInfo\") || \"{}\");\r\n          userInfo = { ...userInfo, ...profileData, isProfileCompleted: true };\r\n          uni.setStorageSync(\"userInfo\", JSON.stringify(userInfo));\r\n\r\n          // 更新当前页面数据\r\n          this.userInfo = {\r\n            ...this.userInfo,\r\n            ...profileData,\r\n            isProfileCompleted: true,\r\n          };\r\n\r\n          uni.hideLoading();\r\n          uni.showToast({\r\n            title: \"保存成功\",\r\n            icon: \"success\",\r\n          });\r\n\r\n          // 返回到个人中心页面\r\n          setTimeout(() => {\r\n            uni.navigateBack();\r\n          }, 1000);\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"保存用户资料失败\", err);\r\n          uni.hideLoading();\r\n          uni.showToast({\r\n            title: \"保存失败\",\r\n            icon: \"none\",\r\n          });\r\n        });\r\n    },\r\n\r\n    // 联系客服\r\n    contactCustomerService() {\r\n      uni.showActionSheet({\r\n        itemList: [\"在线客服\", \"电话客服\"],\r\n        success: (res) => {\r\n          if (res.tapIndex === 0) {\r\n            // 在线客服\r\n            uni.showToast({\r\n              title: \"正在接入在线客服...\",\r\n              icon: \"none\",\r\n            });\r\n          } else if (res.tapIndex === 1) {\r\n            // 电话客服\r\n            uni.makePhoneCall({\r\n              phoneNumber: \"400-123-4567\",\r\n              fail: () => {\r\n                uni.showToast({\r\n                  title: \"拨打失败\",\r\n                  icon: \"none\",\r\n                });\r\n              },\r\n            });\r\n          }\r\n        },\r\n      });\r\n    },\r\n\r\n    // 显示优惠券提示\r\n    showCouponTip() {\r\n      if (!this.userInfo.nickName) {\r\n        this.handleWxLogin();\r\n        return;\r\n      }\r\n      uni.showToast({\r\n        title: \"优惠券功能开发中...\",\r\n        icon: \"none\",\r\n        duration: 2000,\r\n      });\r\n    },\r\n\r\n    // 退出登录\r\n    logout() {\r\n      uni.showModal({\r\n        title: \"提示\",\r\n        content: \"确定要退出登录吗？\",\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            // 清除用户信息\r\n            this.clearUserInfo();\r\n\r\n            uni.showToast({\r\n              title: \"已退出登录\",\r\n              icon: \"success\",\r\n            });\r\n          }\r\n        },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.user-container {\r\n  min-height: 100vh;\r\n  background-color: #f7f7f7;\r\n  padding-bottom: 60rpx;\r\n}\r\n\r\n.user-info-section {\r\n  position: relative;\r\n  height: 300rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.user-info-bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 1;\r\n}\r\n\r\n.bg-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0.2;\r\n}\r\n\r\n.user-info-content {\r\n  position: relative;\r\n  z-index: 2;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 40rpx 30rpx;\r\n  height: 100%;\r\n  background: linear-gradient(to right, #1296db, #14b8e4);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.user-avatar {\r\n  position: relative;\r\n  width: 140rpx;\r\n  height: 140rpx;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  border: 4rpx solid rgba(255, 255, 255, 0.5);\r\n  margin-right: 30rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.user-avatar image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.avatar-edit {\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  width: 44rpx;\r\n  height: 44rpx;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.edit-icon {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.user-detail {\r\n  flex: 1;\r\n  color: #fff;\r\n}\r\n\r\n.user-name {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.user-id {\r\n  font-size: 24rpx;\r\n  opacity: 0.8;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.vip-tag {\r\n  display: inline-block;\r\n  font-size: 22rpx;\r\n  padding: 4rpx 16rpx;\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  border-radius: 20rpx;\r\n}\r\n\r\n.setting-btn {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.setting-icon {\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n}\r\n\r\n/* 用户数据概览 */\r\n.stats-card {\r\n  margin: -40rpx 30rpx 30rpx;\r\n  background-color: #fff;\r\n  border-radius: 12rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\r\n  display: flex;\r\n  padding: 30rpx 0;\r\n  position: relative;\r\n  z-index: 3;\r\n}\r\n\r\n.stats-item {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.stats-value {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.stats-label {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.stats-divider {\r\n  width: 1rpx;\r\n  height: 50rpx;\r\n  background-color: #eee;\r\n  margin-top: 15rpx;\r\n}\r\n\r\n/* 菜单卡片 */\r\n.menu-card {\r\n  background-color: #fff;\r\n  border-radius: 12rpx;\r\n  margin: 20rpx 30rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.menu-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 30rpx;\r\n  border-bottom: 1rpx solid #f5f5f5;\r\n}\r\n\r\n.header-title-wrap {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.header-icon {\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.header-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.header-more {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.arrow-icon {\r\n  width: 24rpx;\r\n  height: 24rpx;\r\n  margin-left: 10rpx;\r\n}\r\n\r\n.menu-content {\r\n  display: flex;\r\n  padding: 30rpx 0;\r\n}\r\n\r\n.menu-item {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  position: relative;\r\n}\r\n\r\n.item-icon {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.menu-text {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n}\r\n\r\n.badge {\r\n  position: absolute;\r\n  top: -10rpx;\r\n  right: 40rpx;\r\n  background-color: #ff5252;\r\n  color: #fff;\r\n  font-size: 22rpx;\r\n  min-width: 32rpx;\r\n  height: 32rpx;\r\n  border-radius: 16rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0 6rpx;\r\n}\r\n\r\n/* 工具网格 */\r\n.tools-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 20rpx;\r\n}\r\n\r\n.tool-item {\r\n  width: 25%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20rpx 0;\r\n  position: relative;\r\n}\r\n\r\n.tool-icon {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.tool-text {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.tool-new {\r\n  position: absolute;\r\n  top: 10rpx;\r\n  right: 20rpx;\r\n  background-color: #ff5252;\r\n  color: #fff;\r\n  font-size: 20rpx;\r\n  padding: 2rpx 8rpx;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n/* 菜单列表 */\r\n.menu-list {\r\n  padding: 10rpx 0;\r\n}\r\n\r\n.menu-list-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 30rpx;\r\n  border-bottom: 1rpx solid #f5f5f5;\r\n}\r\n\r\n.menu-list-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.list-item-left {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.list-item-icon {\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.list-item-text {\r\n  font-size: 30rpx;\r\n  color: #333;\r\n}\r\n\r\n.tag {\r\n  background-color: #ff5252;\r\n  color: #fff;\r\n  font-size: 22rpx;\r\n  padding: 2rpx 10rpx;\r\n  border-radius: 8rpx;\r\n  margin-left: 15rpx;\r\n}\r\n\r\n/* 推广卡片 */\r\n.promo-card {\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: #fff;\r\n  border-radius: 12rpx;\r\n  margin: 20rpx 30rpx;\r\n  padding: 30rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.promo-icon {\r\n  width: 70rpx;\r\n  height: 70rpx;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.promo-content {\r\n  flex: 1;\r\n}\r\n\r\n.promo-title {\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 6rpx;\r\n}\r\n\r\n.promo-desc {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n/* 退出按钮 */\r\n.logout-btn {\r\n  margin: 50rpx 30rpx;\r\n  height: 90rpx;\r\n  line-height: 90rpx;\r\n  border-radius: 45rpx;\r\n  background-color: #fff;\r\n  color: #ff5252;\r\n  font-size: 32rpx;\r\n  text-align: center;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.version-info {\r\n  text-align: center;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-top: 30rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/360MoveData/Users/Rebecca/Desktop/wx-pos/pages/user/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}